(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";e.s(["Button",()=>s]);var t=e.i(43476);function s(e){let{variant:s="primary",size:r="md",loading:l=!1,disabled:a,children:i,className:n="",...c}=e;return(0,t.jsxs)("button",{disabled:a||l,className:"".concat("inline-flex items-center justify-center font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary text-white hover:bg-red-700 focus:ring-primary shadow-md hover:shadow-lg",secondary:"bg-secondary border border-border text-text hover:bg-muted focus:ring-secondary",ghost:"bg-transparent text-text-muted hover:text-text hover:bg-muted/50 focus:ring-muted"}[s]," ").concat({sm:"px-3 py-2 text-sm rounded-md",md:"px-4 py-3 text-sm rounded-lg",lg:"px-6 py-4 text-base rounded-lg"}[r]," ").concat(n),...c,children:[l&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})}},3812,61418,e=>{"use strict";e.s(["Input",()=>s],3812);var t=e.i(43476);function s(e){let{label:s,error:r,helperText:l,className:a="",...i}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[s&&(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[s,i.required&&(0,t.jsx)("span",{className:"text-primary ml-1",children:"*"})]}),(0,t.jsx)("input",{style:{color:"black"},className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 focus:outline-none transition-colors ".concat(r?"border-error focus:border-error focus:ring-error/20":""," ").concat(a),...i}),r&&(0,t.jsxs)("p",{className:"text-sm text-error flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r]}),l&&!r&&(0,t.jsx)("p",{className:"text-sm text-text-muted",children:l})]})}function r(e){let{variant:s="info",title:r,children:l,onClose:a}=e,i={success:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),warning:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),error:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};return(0,t.jsx)("div",{className:"rounded-lg border p-4 ".concat({success:"bg-green-500/10 border-green-500/20 text-green-400",warning:"bg-yellow-500/10 border-yellow-500/20 text-yellow-400",error:"bg-red-500/10 border-red-500/20 text-red-400",info:"bg-blue-500/10 border-blue-500/20 text-blue-400"}[s]),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:i[s]}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[r&&(0,t.jsx)("h3",{className:"text-sm font-medium mb-1",children:r}),(0,t.jsx)("div",{className:"text-sm",children:l})]}),a&&(0,t.jsx)("button",{className:"ml-3 flex-shrink-0 opacity-70 hover:opacity-100 transition-opacity",onClick:a,children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}e.s(["Alert",()=>r],61418)},67073,e=>{"use strict";e.s(["Select",()=>s]);var t=e.i(43476);function s(e){let{label:s,error:r,options:l,placeholder:a,className:i="",...n}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[s&&(0,t.jsxs)("label",{className:"block text-sm font-medium text-text",children:[s,n.required&&(0,t.jsx)("span",{className:"text-primary ml-1",children:"*"})]}),(0,t.jsxs)("select",{className:"w-full px-4 py-3 bg-secondary border border-border rounded-lg text-text focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-colors ".concat(r?"border-error focus:border-error focus:ring-error/20":""," ").concat(i),...n,children:[a&&(0,t.jsx)("option",{value:"",disabled:!0,children:a}),l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),r&&(0,t.jsxs)("p",{className:"text-sm text-error flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r]})]})}},65836,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),s=e.i(71645),r=e.i(57951),l=e.i(9165),a=e.i(59544),i=e.i(3812),n=e.i(67073),c=e.i(61418);function d(){let{user:e}=(0,r.useAuth)(),[d,o]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[b,N]=(0,s.useState)(null),[w,C]=(0,s.useState)("CUSTOMER"),R=async()=>{try{h(null);let e=await l.default.getUsers();o(e)}catch(e){console.error("Failed to fetch users:",e),h("Failed to load users")}finally{u(!1)}},k=async()=>{if(!f.trim())return void R();try{u(!0),h(null);let e=await l.default.searchUsers(f);o(e)}catch(e){console.error("Search failed:",e),h("Search failed")}finally{u(!1)}},M=async()=>{if(b)try{h(null),await l.default.updateUserRole(b.id,{newRole:w}),g("User role updated to ".concat(w," successfully")),j(!1),N(null),R()}catch(e){console.error("Role update failed:",e),h(e&&"object"==typeof e&&"error"in e?e.error:"Failed to update user role")}},z=async(e,t)=>{if(confirm('Are you sure you want to delete user "'.concat(t,'"?')))try{h(null),await l.default.deleteUser(e),g("User deleted successfully"),R()}catch(e){console.error("Delete failed:",e),h(e&&"object"==typeof e&&"error"in e?e.error:"Failed to delete user")}};return((0,s.useEffect)(()=>{(null==e?void 0:e.role)==="ADMIN"&&R()},[e]),(null==e?void 0:e.role)!=="ADMIN")?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Access denied. Admin role required."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"sm:flex sm:items-center",children:(0,t.jsxs)("div",{className:"sm:flex-auto",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Manage user accounts and roles."})]})}),m&&(0,t.jsx)(c.Alert,{variant:"error",onClose:()=>h(null),children:m}),p&&(0,t.jsx)(c.Alert,{variant:"success",onClose:()=>g(null),children:p}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(i.Input,{type:"text",placeholder:"Search by name or email...",value:f,onChange:e=>y(e.target.value),onKeyPress:e=>"Enter"===e.key&&k()})}),(0,t.jsx)(a.Button,{onClick:k,variant:"secondary",children:"Search"}),(0,t.jsx)(a.Button,{onClick:()=>{y(""),R()},variant:"secondary",children:"Clear"})]}),v&&b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,t.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Update User Role"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["User: ",b.name]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Email: ",b.email]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Role"}),(0,t.jsx)(n.Select,{value:w,onChange:e=>C(e.target.value),options:[{value:"CUSTOMER",label:"Customer"},{value:"MECHANIC",label:"Mechanic"},{value:"ADMIN",label:"Admin"}]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)(a.Button,{type:"button",onClick:()=>{j(!1),N(null),h(null)},variant:"secondary",children:"Cancel"}),(0,t.jsx)(a.Button,{type:"button",onClick:M,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Update Role"})]})]})]})})}),(0,t.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:x?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading users..."})]}):(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:s.email})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"ADMIN":return"bg-purple-100 text-purple-800";case"MECHANIC":return"bg-green-100 text-green-800";case"CUSTOMER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(s.role)),children:s.role})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.phone||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.active?"Active":"Inactive"})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{N(s),C(s.role),j(!0)},className:"text-indigo-600 hover:text-indigo-900",children:"Change Role"}),s.id!==(null==e?void 0:e.id)&&(0,t.jsx)("button",{onClick:()=>z(s.id,s.name),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},s.id))})]}),0===d.length&&(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No users found."})})]})})]})}}]);